webpackJsonp([1],{"+vOl":function(t,e){},"2Vc4":function(t,e){},"2Y2G":function(t,e){},"3hTW":function(t,e){},"8U3U":function(t,e){},AXse:function(t,e){},B1It:function(t,e){},CeGT:function(t,e){},FljQ:function(t,e){},JFwc:function(t,e){},Kabd:function(t,e){},M0gx:function(t,e){},ML8f:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("//Fk"),n=a.n(s),i=a("7+uW"),o=a("cHfL"),r=a.n(o),l={name:"App",methods:{},created:function(){var t=this,e=new r.a("p72KxWJUeq8LrhTZqrcp2WOcpW13GXrl","arcofcollaboration.eu.auth0.com",{auth:{responseType:"token id_token",params:{connectionScopes:{connectionName:["openid","user_metadata","app_metadata","picture"]}}},theme:{logo:"https://image.ibb.co/gjZuF7/logo_dark.png",primaryColor:"#009B9C"},languageDictionary:{title:"welcome"}});e.on("authenticated",function(e){console.log("authResult"),console.log(e),localStorage.setItem("access_token",e.accessToken),localStorage.setItem("id_token",e.idToken),t.$store.commit("setAuthenticated",!!localStorage.getItem("id_token")),t.$store.dispatch("updateProfile"),t.$router.push({name:"RootView"})}),e.on("authorization_error",function(e){console.log("error authenticating"),console.log(e),t.$store.dispatch("logoutUser")}),this.$store.commit("setLock",e),this.$store.commit("setAuthenticated",!!localStorage.getItem("id_token")),this.$store.dispatch("updateProfile"),oe.locale="de"}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(t){a("B1It")},null,null).exports,p=a("/ocq"),d={computed:{isAuthenticated:function(){return this.$store.getters.isAuthenticated},userNickname:function(){return null!=this.$store.state.user.profile?this.$store.state.user.profile.nickname:""}},methods:{login:function(){this.$store.state.user.lock.show()},logout:function(){this.$store.dispatch("logoutUser")}}},h={name:"RootView",mixins:[d],created:function(){this.isAuthenticated?(console.log("redirecting to app view"),this.$router.replace({name:"AppView"})):(console.log("redirecting to landing page"),this.$router.replace({name:"LandingPage"}))}},m={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var v=a("VU/8")(h,m,!1,function(t){a("bS/7")},"data-v-6587d89a",null).exports,f={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{},[e("h1",[this._v("login callback")])])}]};var w=a("VU/8")({computed:{},created:function(){this.$store.dispatch("handleAuthentication")}},f,!1,function(t){a("CeGT")},null,null).exports,g={mixins:[d]},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-container this-container"},[a("div",{staticClass:"central-column-container dark-1"},[a("div",{staticClass:"w3-row w3-center"}),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"w3-row btn-row"},[t.isAuthenticated?t._e():a("app-button",{staticClass:"margin-0-auto",on:{click:function(e){t.login()}}},[t._v("Start!")])],1),t._v(" "),a("div",{staticClass:"w3-row w3-center"})])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w3-row w3-center"},[e("img",{staticClass:"logo",attrs:{src:a("wYO/"),alt:""}})])}]};var x=a("VU/8")(g,_,!1,function(t){a("JFwc")},"data-v-6c7a17d0",null).exports,C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{},[e("router-view")],1)},staticRenderFns:[]};var b=a("VU/8")({},C,!1,function(t){a("PtrG")},"data-v-9b3160c6",null).exports,k={mixins:[d],data:function(){return{organizationCreationError:!1,orgIdSelected:""}},computed:{orgs:function(){return this.$store.getters.organizations},showHome:function(){if(this.$route.params.orgId)return!0},orgName:function(){if(this.$store.state.user.profile)for(var t in this.$store.state.user.profile.organizations)if(this.$store.state.user.profile.organizations[t].id===this.$route.params.orgId)return this.$store.state.user.profile.organizations[t].name;return""}},watch:{$route:function(){this.$route.params&&""!==this.$route.params.orgId?this.orgIdSelected=this.$route.params.orgId:this.orgIdSelected=""}},methods:{goToOrg:function(){this.orgIdSelected&&""!==this.orgIdSelected&&(console.log("redirecting to organization content id: "+this.orgIdSelected),this.$router.push({name:"OrganizationContent",params:{orgId:this.orgIdSelected}}))}},created:function(){this.$route.params&&""!==this.$route.params.orgId&&(this.orgIdSelected=this.$route.params.orgId)}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w3-row header-container"},[a("div",{staticClass:"w3-row header-container"},[a("div",{staticClass:"w3-col m3 s12"},[t.showHome?a("router-link",{staticClass:"circular-button w3-center cursor-pointer app-color-white-1 disp-block",attrs:{to:{name:"OrganizationContent",params:{}}}},[a("i",{staticClass:"fa fa-home",attrs:{"aria-hidden":"true"}}),a("span",[t._v(" "+t._s(t.orgName))])]):t._e()],1),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"w3-col m3 s12 user-container"},[a("div",{staticClass:"w3-right cursor-pointer app-color-white-1"},[a("i",{staticClass:"fa fa-sign-out",attrs:{"aria-hidden":"true"},on:{click:function(e){t.logout()}}})]),t._v(" "),a("router-link",{staticClass:"w3-right w3-margin-right cursor-pointer app-color-white-1 disp-block",attrs:{to:{name:"Organizations",params:{}}}},[t._v("\n        "+t._s(t.userNickname)+"\n      ")])],1)]),t._v(" "),a("div",{staticClass:"w3-row w3-center"},[a("app-error-panel",{attrs:{show:t.organizationCreationError,message:t.$t("organizationCreationErrorMessage")}})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w3-col m6 s12 w3-center"},[e("img",{staticClass:"logo",attrs:{src:a("wYO/"),alt:""}})])}]};var T={components:{"app-header":a("VU/8")(k,y,!1,function(t){a("+vOl")},"data-v-6d95cc67",null).exports},created:function(){this.$store.state.user.authenticated||this.$router.push({name:"LandingPage"})}},$={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{},[e("app-header"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var q=a("VU/8")(T,$,!1,function(t){a("M0gx")},"data-v-b770a66c",null).exports,I={data:function(){return{name:"",description:"",errorWhenCreating:!1,errorWhenCreatingMsg:""}},computed:{},mounted:function(){},methods:{closeThis:function(){this.$emit("close")},accept:function(){var t=this,e={name:this.name,description:this.description};this.axios.post("/1/organization/create",e).then(function(e){"success"===e.data.result?(t.$store.dispatch("updateProfile"),t.closeThis(),console.log("og created:"+e.data.data),console.log(e),t.$router.push({name:"OrganizationPolls",params:{orgId:e.data.elementId}})):(console.log(e.data),t.errorWhenCreating=!0,t.errorWhenCreatingMsg=e.data.message)}).catch(function(e){console.log(e),t.errorWhenCreating=!0,t.errorWhenCreatingMsg=e.message})}}},P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w3-modal"},[a("div",{staticClass:"w3-modal-content dark-3"},[a("div",{staticClass:"w3-card-4 dark-3"},[a("div",{staticClass:"close-div w3-display-topright w3-xlarge cursor-pointer app-color-white-1",on:{click:function(e){t.closeThis()}}},[a("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}})]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"form-container"},[a("div",{staticClass:"w3-container form "},[a("div",{staticClass:"w3-row"},[t._m(1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"rounded-input app-color-2-br dark-3",attrs:{type:"text",name:"",value:""},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"w3-row w3-margin-top"},[t._m(2),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"rounded-input app-color-2-br dark-3",domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"w3-row-padding bottom-btns-row"},[a("div",{staticClass:"w3-col m6"},[a("button",{staticClass:"w3-button app-button-light",attrs:{type:"button"},on:{click:function(e){t.closeThis()}}},[t._v("Cancel")])]),t._v(" "),a("div",{staticClass:"w3-col m6"},[a("button",{staticClass:"w3-button app-button",attrs:{type:"button"},on:{click:function(e){t.accept()}}},[t._v("Accept")])])]),t._v(" "),a("app-error-panel",{attrs:{show:t.errorWhenCreating,message:t.errorWhenCreatingMsg}})],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w3-border-bottom"},[e("h2",[this._v("Create New Organization")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("b",[this._v("Name:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:""}},[e("b",[this._v("Description:")])])}]};var A={components:{"app-new-org-modal":a("VU/8")(I,P,!1,function(t){a("ix7x")},"data-v-620a3ace",null).exports},data:function(){return{newOrgModal:!1}},computed:{organizations:function(){return this.$store.getters.organizations}}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w3-container content-container this-container"},[t.newOrgModal?a("app-new-org-modal",{on:{close:function(e){t.newOrgModal=!1}}}):t._e(),t._v(" "),a("div",{staticClass:"w3-row"},[t._m(0),t._v(" "),a("app-plus-button",{staticClass:"w3-left w3-margin-left",on:{click:function(e){t.newOrgModal=!0}}})],1),t._v(" "),a("div",{staticClass:"w3-row-padding middle-container"},t._l(t.organizations,function(e){return a("div",{key:e.id,staticClass:"w3-col l4 m6 s12 w3-margin-bottom app-card-container"},[a("router-link",{staticClass:"w3-card-4 app-card disp-block",attrs:{to:{name:"OrganizationPolls",params:{orgId:e.id}}}},[a("h4",[a("b",[t._v(t._s(e.name))])]),t._v(" "),a("p",[t._v(t._s(e.description))])])],1)}))],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w3-left content-title-div"},[e("h4",[e("b",[this._v("My Organizations")])])])}]};var R=a("VU/8")(A,E,!1,function(t){a("FljQ")},"data-v-2450a8e1",null).exports,z={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{},[e("router-view")],1)},staticRenderFns:[]};var F=a("VU/8")({},z,!1,function(t){a("ohxK")},null,null).exports,O={props:{poll:{type:Object}}},M={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-link",{staticClass:"w3-card-2 app-card w3-round-large poll-card w3-display-container",attrs:{to:{name:"OrganizationPoll",params:{pollId:t.poll.id}}}},[a("h3",[a("b",[t._v(t._s(t.poll.title))])]),t._v(" "),a("p",[t._v(t._s(t.poll.description))]),t._v(" "),t.poll.isTemplate?a("div",{staticClass:"w3-display-topright template-tag app-color-1-bg w3-padding"},[t._v("\n    IS "+t._s(t.poll.isPublicTemplate?"PUBLIC":"")+" TEMPLATE\n  ")]):t._e()])},staticRenderFns:[]};var S={components:{"app-poll-card":a("VU/8")(O,M,!1,function(t){a("sRtR")},"data-v-362e47cb",null).exports},data:function(){return{polls:[],errorGettingPolls:!1}},computed:{orgId:function(){return this.$route.params.orgId}},watch:{$route:function(){this.update()}},methods:{update:function(){var t=this;this.axios.get("/1/organization/"+this.orgId+"/polls").then(function(e){"success"===e.data.result?t.polls=e.data.data:t.errorGettingPolls=!0})},newPoll:function(){this.$router.push({name:"NewPoll"})}},mounted:function(){this.update()}},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w3-container content-container this-container"},[a("div",{staticClass:"w3-row"},[t._m(0),t._v(" "),a("app-plus-button",{staticClass:"w3-left w3-margin-left",on:{click:function(e){t.newPoll()}}})],1),t._v(" "),a("div",{staticClass:"w3-row-padding organization-polls-row"},t._l(this.polls,function(t){return a("div",{key:t.id,staticClass:"w3-col l4 m6 s12 w3-margin-bottom"},[a("app-poll-card",{attrs:{poll:t}})],1)})),t._v(" "),0===this.polls.length?a("div",{staticClass:"w3-row w3-center w3-margin-top"},[a("i",[t._v("no polls have been created")])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w3-left content-title-div"},[e("h4",[e("b",[this._v("Organization Polls")])])])}]};var U=a("VU/8")(S,N,!1,function(t){a("yKvA")},null,null).exports,V=a("vwbq"),D=function(t,e,a){var s={radius:5,w:600,h:600,factor:1,factorLegend:.85,levels:3,maxValue:0,radians:2*Math.PI,opacityArea:.5,ToRight:5,TranslateX:80,TranslateY:30,ExtraWidthX:100,ExtraWidthY:100,color:V.scaleOrdinal().range(["#6F257F","#CA0D59"])};if(void 0!==a)for(var n in a)void 0!==a[n]&&(s[n]=a[n]);s.maxValue=5;var i=e[0].map(function(t,e){return t.area}),o=i.length,r=s.factor*Math.min(s.w/2,s.h/2);V.format("%");V.select(t).select("svg").remove();for(var l=V.select(t).append("svg").attr("width",s.w+s.ExtraWidthX).attr("height",s.h+s.ExtraWidthY).append("g").attr("transform","translate("+s.TranslateX+","+s.TranslateY+")"),c=0;c<s.levels;c++){var u=s.factor*r*((c+1)/s.levels);l.append("svg:circle").attr("cx",s.w/2).attr("cy",s.w/2).attr("r",u).style("fill","none").style("stroke","#009B9C").style("stroke-opacity","0.75").style("stroke-width","0.3px")}l.append("svg:circle").attr("cx",s.w/2).attr("cy",s.w/2).attr("r",s.factor*r).style("fill","none").style("stroke","#339470").style("stroke-opacity","0.75").style("stroke-width","3px");for(c=0;c<s.levels;c++){u=s.factor*r*((c+1)/s.levels);l.selectAll(".levels").data([1]).enter().append("svg:text").attr("x",function(t){return u*(1-s.factor*Math.sin(0))}).attr("y",function(t){return u*(1-s.factor*Math.cos(0))}).attr("class","legend").style("font-family","sans-serif").style("font-size","10px").attr("transform","translate("+(s.w/2-u+s.ToRight)+", "+(s.h/2-u+13)+")").attr("fill","#339470").text((c+1)*s.maxValue/s.levels)}var p=0,d=[],h=l.selectAll(".axis").data(i).enter().append("g").attr("class","axis");h.append("line").attr("x1",s.w/2).attr("y1",s.h/2).attr("x2",function(t,e){return s.w/2*(1-s.factor*Math.sin(e*s.radians/o))}).attr("y2",function(t,e){return s.h/2*(1-s.factor*Math.cos(e*s.radians/o))}).attr("class","line").style("stroke","#339470").style("stroke-width","1px"),h.append("text").attr("class","legend").text(function(t){return t}).style("font-family","sans-serif").style("font-size","13px").style("stroke","#FFFFFF").attr("text-anchor","middle").attr("dy","1.5em").attr("transform",function(t,e){return"translate(0, -10)"}).attr("x",function(t,e){return s.w/2*(1-s.factorLegend*Math.sin(e*s.radians/o))-60*Math.sin(e*s.radians/o)}).attr("y",function(t,e){return s.h/2*(1-Math.cos(e*s.radians/o))-20*Math.cos(e*s.radians/o)}),e.forEach(function(t,e){l.selectAll(".nodes").data(t,function(t,e){d.push([s.w/2*(1-parseFloat(Math.max(t.value,0))/s.maxValue*s.factor*Math.sin(e*s.radians/o)),s.h/2*(1-parseFloat(Math.max(t.value,0))/s.maxValue*s.factor*Math.cos(e*s.radians/o))])}),d.push(d[0]),l.selectAll(".area").data([d]).enter().append("polygon").attr("class","radar-chart-serie"+p).style("stroke-width","2px").style("stroke",s.color(p)).attr("points",function(t){for(var e="",a=0;a<t.length;a++)e=e+t[a][0]+","+t[a][1]+" ";return e}).style("fill",function(t,e){return s.color(p)}).style("fill-opacity",s.opacityArea).on("mouseover",function(t){var e="polygon."+V.select(this).attr("class");l.selectAll("polygon").transition(200).style("fill-opacity",.1),l.selectAll(e).transition(200).style("fill-opacity",.7)}).on("mouseout",function(){l.selectAll("polygon").transition(200).style("fill-opacity",s.opacityArea)}),p++}),p=0;V.select("body").append("div").attr("class","toolTip");e.forEach(function(t,e){l.selectAll(".nodes").data(t).enter().append("svg:circle").attr("class","radar-chart-serie"+p).attr("r",s.radius).attr("alt",function(t){return Math.max(t.value,0)}).attr("cx",function(t,e){return d.push([s.w/2*(1-parseFloat(Math.max(t.value,0))/s.maxValue*s.factor*Math.sin(e*s.radians/o)),s.h/2*(1-parseFloat(Math.max(t.value,0))/s.maxValue*s.factor*Math.cos(e*s.radians/o))]),s.w/2*(1-Math.max(t.value,0)/s.maxValue*s.factor*Math.sin(e*s.radians/o))}).attr("cy",function(t,e){return s.h/2*(1-Math.max(t.value,0)/s.maxValue*s.factor*Math.cos(e*s.radians/o))}).attr("data-id",function(t){return t.area}).style("fill","#fff").style("stroke-width","2px").style("stroke",s.color(p)).style("fill-opacity",.9),p++})},Q={props:{chartData:{type:Array}},data:function(){return{width:300,height:300}},methods:{draw:function(){var t={w:this.width,h:this.height,levels:5,TranslateX:40,TranslateY:25,ExtraWidthX:70,ExtraWidthY:60};D("#chart-container",this.chartData,t)},checkWindowSize:function(){var t=window.innerWidth;t<800?(this.width=t/2,this.height=t/2):(this.width=400,this.height=400),console.log("width:"+this.width),console.log("height:"+this.height),this.draw()}},mounted:function(){this.draw(),this.checkWindowSize(),window.addEventListener("resize",this.checkWindowSize)}},L={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"chart-container"}})},staticRenderFns:[]};var W=a("VU/8")(Q,L,!1,function(t){a("vo56")},"data-v-8ca4030e",null).exports,B={props:{question:{type:Object},stats:{type:Array,default:function(){return[]}},textAnswers:{type:Array,default:function(){return[]}}}},X={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"question-results-container w3-row app-color-2-br"},[a("div",{staticClass:"w3-col m6 question-text"},[t._v("\n    "+t._s(t.question.text)+"\n  ")]),t._v(" "),a("div",{staticClass:"w3-col m6 stats-cell w3-center"},["RATE_1_5"===t.question.type?a("span",{},[t._v("\n      min: "+t._s(t.stats[0].toFixed(1))+" - mean: "+t._s(t.stats[1].toFixed(1))+" - max: "+t._s(t.stats[2].toFixed(1))+"\n    ")]):t._e(),t._v(" "),"TEXT"===t.question.type?a("div",{},t._l(t.textAnswers,function(e,s){return a("p",{key:s},[t._v(t._s(e))])})):t._e()])])},staticRenderFns:[]};var H={components:{"app-radar-chart":W,"app-poll-question-results":a("VU/8")(B,X,!1,function(t){a("YlO/")},"data-v-0a24e65a",null).exports},data:function(){return{poll:null,details:null,chartData:[],errorMakingTemplate:!1,errorMakingTemplateMsg:"",localIsTemplate:!1,localIsTemplatePublic:!1,loaded:!1,deleteTemplateIntent:!1}},computed:{pollId:function(){return this.$route.params.pollId},pollAnswerUrl:function(){return window.location.host+"/#/app/answer/"+this.poll.id}},watch:{localIsTemplate:function(){this.loaded&&this.makeTemplate(this.localIsTemplate)},localIsTemplatePublic:function(){this.loaded&&this.makeTemplatePublic(this.localIsTemplatePublic)}},methods:{update:function(){var t=this;this.pollId&&""!==this.pollId&&this.axios.get("/1/poll/"+this.pollId).then(function(e){if("success"===e.data.result)return console.log("updating poll data"),t.poll=e.data.data,t.localIsTemplate=t.poll.isTemplate,t.localIsTemplatePublic=t.poll.isPublicTemplate,t.axios.get("/1/poll/"+t.poll.id+"/details")}).then(function(e){"success"===e.data.result&&(t.details=e.data.data,t.loaded=!0,t.updateStats(),t.updateChartData())})},updateChartData:function(){if(null===this.details)return[];var t=[];for(var e in this.details.axesResults){var a=this.details.axesResults[e],s=0;for(var n in a.questionResults){var i=a.questionResults[n];"RATE_1_5"===i.questionType&&(s+=i.mean*i.weight/100)}t.push({area:a.axisTitle,value:s})}this.chartData=[t]},updateStats:function(){for(var t in this.details.axesResults){var e=this.details.axesResults[t];for(var a in e.questionResults){var s=e.questionResults[a];this.updateQuestionStats(s.questionId)}}},updateQuestionStats:function(t){var e=this.getQuestionResult(t);if("RATE_1_5"===e.questionType){var a=0,s=999,n=-1;for(var i in e.answersRates){var o=e.answersRates[i];a+=o,o<s&&(s=o),o>n&&(n=o)}var r=a/e.answersRates.length;e.min=s,e.mean=r,e.max=n}},getQuestionResult:function(t){for(var e in this.details.axesResults){var a=this.details.axesResults[e];for(var s in a.questionResults){var n=a.questionResults[s];if(n.questionId===t)return n}}},getQuestionResultStats:function(t){var e=this.getQuestionResult(t);return[e.min,e.mean,e.max]},getQuestionTextResults:function(t){return this.getQuestionResult(t).answersTexts},makeTemplate:function(t){var e=this;this.axios.put("/1/poll/"+this.pollId+"/makeTemplate",{},{params:{isTemplate:t}}).then(function(t){"success"===t.data.result?e.update():(e.errorMakingTemplate=!0,e.errorMakingTemplateMsg=t.data.message)})},makeTemplatePublic:function(t){var e=this;this.axios.put("/1/poll/"+this.pollId+"/makePublicTemplate",{},{params:{isPublic:t}}).then(function(t){"success"===t.data.result?e.update():(e.errorMakingTemplate=!0,e.errorMakingTemplateMsg=t.data.message)})},deleteIntent:function(){var t=this;setTimeout(function(){t.deleteTemplateIntent=!0},1e3)},deletePoll:function(){var t=this;this.axios.delete("/1/poll/"+this.pollId).then(function(e){"success"===e.data.result&&t.$router.push({name:"OrganizationPolls"})})}},created:function(){this.update()}},Y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return null!==t.poll&&null!==t.details?a("div",{staticClass:"w3-container content-container this-container"},[a("router-link",{staticClass:"w3-row disp-block w3-margin-bottom w3-hide-large",attrs:{to:{name:"OrganizationPolls"}}},[a("app-back-button",{})],1),t._v(" "),a("div",{staticClass:"central-column-container dark-1"},[a("router-link",{staticClass:"w3-hide-medium w3-hide-small back-button-in-column",attrs:{to:{name:"OrganizationPolls"}}},[a("app-back-button",{})],1),t._v(" "),a("div",{staticClass:"w3-row"},[a("app-column-header",[t._v("\n        Poll Details\n      ")])],1),t._v(" "),a("div",{staticClass:"w3-row w3-margin-top"},[a("div",{staticClass:"w3-col m8"},[a("div",{staticClass:"w3-row w3-center title-container dark-3 w3-round-large"},[a("h3",[t._v(t._s(t.poll.title))]),t._v(" "),a("p",[t._v(t._s(t.poll.description))])]),t._v(" "),a("div",{staticClass:"w3-row-padding w3-margin-top"},[a("div",{staticClass:"w3-col m6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.localIsTemplate,expression:"localIsTemplate"}],staticClass:"w3-check",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.localIsTemplate)?t._i(t.localIsTemplate,null)>-1:t.localIsTemplate},on:{change:function(e){var a=t.localIsTemplate,s=e.target,n=!!s.checked;if(Array.isArray(a)){var i=t._i(a,null);s.checked?i<0&&(t.localIsTemplate=a.concat([null])):i>-1&&(t.localIsTemplate=a.slice(0,i).concat(a.slice(i+1)))}else t.localIsTemplate=n}}}),t._v(" "),a("label",[t._v("Make a template")])]),t._v(" "),t.poll.isTemplate?a("div",{staticClass:"w3-col m6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.localIsTemplatePublic,expression:"localIsTemplatePublic"}],staticClass:"w3-check",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.localIsTemplatePublic)?t._i(t.localIsTemplatePublic,null)>-1:t.localIsTemplatePublic},on:{change:function(e){var a=t.localIsTemplatePublic,s=e.target,n=!!s.checked;if(Array.isArray(a)){var i=t._i(a,null);s.checked?i<0&&(t.localIsTemplatePublic=a.concat([null])):i>-1&&(t.localIsTemplatePublic=a.slice(0,i).concat(a.slice(i+1)))}else t.localIsTemplatePublic=n}}}),t._v(" "),a("label",[t._v("Public")])]):t._e()]),t._v(" "),t.poll.isTemplate?a("div",{staticClass:"w3-row w3-margin-top w3-padding dark-3 anouncement w3-round"},[a("span",[t._v("this poll can be used as a template when creating new polls in "+t._s(t.poll.isPublicTemplate?"any":"this")+" organization")])]):t._e()]),t._v(" "),a("div",{staticClass:"w3-col m4"},[a("div",{staticClass:"w3-row w3-center n-answers-div"},[a("b",[t._v(t._s(t.details.numberOfAnswers))])]),t._v(" "),a("div",{staticClass:"w3-row w3-center"},[t._v("\n          answers\n        ")])])]),t._v(" "),a("div",{staticClass:"w3-row w3-margin-top"},[a("span",{staticClass:"w3-margin-left w3-small anouncement"},[t._v("link to answer the poll:")]),t._v(" "),a("input",{staticClass:"rounded-input dark-3 app-color-2-br",attrs:{type:"text",name:""},domProps:{value:t.pollAnswerUrl}})]),t._v(" "),t.details.numberOfAnswers>0?a("div",{},[a("hr"),t._v(" "),a("h4",[t._v("Results:")]),t._v(" "),a("div",{staticClass:"w3-row w3-round-large"},[t.chartData.length>0?a("app-radar-chart",{attrs:{chartData:t.chartData}}):t._e()],1),t._v(" "),a("div",{staticClass:"w3-row w3-margin-top"},[a("h4",[t._v("Detailed Results:")]),t._v(" "),t._l(t.poll.axes,function(e){return a("div",{key:e.id,staticClass:"w3-row w3-margin-top"},[a("div",{staticClass:"rounded-input app-color-2-br"},[t._v("\n           "+t._s(e.title)+"\n          ")]),t._v(" "),t._l(e.questions,function(e){return a("div",{key:e.id,staticClass:"w3-row question-result-row"},[a("app-poll-question-results",{attrs:{question:e,stats:t.getQuestionResultStats(e.id),textAnswers:t.getQuestionTextResults(e.id)}})],1)})],2)})],2)]):t._e(),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"bottom-row"},[a("div",{staticClass:"w3-row w3-center"},[a("button",{staticClass:"w3-button app-button-danger",on:{click:function(e){t.deleteIntent()}}},[t._v("delete")])]),t._v(" "),t.deleteTemplateIntent?a("div",{staticClass:"w3-row w3-center w3-margin-top"},[a("button",{staticClass:"w3-button app-button",on:{click:function(e){t.deleteTemplateIntent=!1}}},[t._v("cancel")]),t._v(" "),a("button",{staticClass:"w3-button app-button-danger",on:{click:function(e){t.deletePoll()}}},[t._v("confirm")])]):t._e()])],1)],1):t._e()},staticRenderFns:[]};var G=a("VU/8")(H,Y,!1,function(t){a("Xz9D")},"data-v-5ba1b37b",null).exports,j=function(){return{id:Date.now().toString(),text:"",type:"RATE_1_5",weight:100,custom:!0}},K=function(){return{id:Date.now().toString(),title:"",description:"",questions:[j()],custom:!0}},J=function(){return{id:Date.now().toString(),title:"",description:"",axes:[K()],custom:!0}},Z={computed:{orgId:function(){return this.$route.params.orgId}},created:function(){var t=this;this.axios.get("/1/organization/"+this.orgId+"/hasTemplates").then(function(e){"success"===e.data.result?e.data.data?(console.log("templates available"),t.$router.replace({name:"NewPollTemplate"})):(console.log("templates not available"),t.$store.state.newpoll.editing||t.$store.commit("setNewPoll",J()),t.$router.replace({name:"NewPollQuestions"})):(console.log(e.data.message),t.errorFlag=!0,t.errorMsg=e.data.message)})}},tt={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]};var et=a("VU/8")(Z,tt,!1,function(t){a("lZ/a")},null,null).exports,at={data:function(){return{templates:[],selected:null,errorFlag:!1,errorMsg:"",showErrors:!1}},computed:{orgId:function(){return this.$route.params.orgId},isTemplateSelected:function(){return null!==this.selected}},methods:{selectTemplate:function(t){this.selected=t},isSelected:function(t){return null!=this.selected&&t.id===this.selected.id},next:function(){var t=this,e=!0;this.isTemplateSelected||(this.showErrors=!0,e=!1),e&&this.axios.get("/1/poll/"+this.selected.id).then(function(e){"success"===e.data.result?(t.$store.commit("setFromTemplate",!0),t.$store.commit("setNewPoll",e.data.data),t.$router.push({name:"NewPollQuestions"})):(t.errorFlag=!0,t.errorMsg=e.data.message)})},skip:function(){this.$store.commit("setFromTemplate",!1),this.$store.commit("setNewPoll",J()),this.$router.push({name:"NewPollQuestions"})}},created:function(){var t=this;this.axios.get("/1/organization/"+this.orgId+"/templates").then(function(e){"success"===e.data.result?t.templates=e.data.data:(t.errorFlag=!0,t.errorMsg=e.data.message)})}},st={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w3-container this-container content-container"},[a("router-link",{staticClass:"w3-row disp-block w3-margin-bottom w3-hide-large",attrs:{to:{name:"OrganizationPolls"}}},[a("app-back-button",{})],1),t._v(" "),a("div",{staticClass:"central-column-container dark-1"},[a("router-link",{staticClass:"w3-hide-medium w3-hide-small back-button-in-column",attrs:{to:{name:"OrganizationPolls"}}},[a("app-back-button",{})],1),t._v(" "),a("div",{staticClass:"w3-row"},[a("app-column-header",[t._v("\n        New Poll - "),a("i",[t._v("Select a Template")])])],1),t._v(" "),t._l(t.templates,function(e){return a("div",{key:e.id,staticClass:"w3-card-4 app-card disp-block w3-margin-top cursor-pointer",class:{"w3-blue":t.isSelected(e)},on:{click:function(a){t.selectTemplate(e)}}},[a("h1",[t._v(t._s(e.title))]),t._v(" "),a("p",[t._v(t._s(e.description))])])}),t._v(" "),a("app-error-panel",{attrs:{show:t.showErrors&&!t.isTemplateSelected,message:"no template has been selected"}}),t._v(" "),a("div",{staticClass:"w3-row w3-margin-top"},[a("app-button",{staticClass:"w3-right w3-margin-left",on:{click:function(e){t.next()}}},[t._v("Next")]),t._v(" "),a("app-button",{staticClass:"w3-right",on:{click:function(e){t.skip()}}},[t._v("Skip")])],1)],2)],1)},staticRenderFns:[]};var nt=a("VU/8")(at,st,!1,function(t){a("gUlX")},null,null).exports,it=a("mvHQ"),ot=a.n(it),rt={props:{value:{type:String},showAsInput:{type:Boolean,default:!0},restorable:{type:Boolean,default:!1},placeholder:{type:String,default:""},useTextArea:{type:Boolean,default:!1}},watch:{value:function(){this.checkHeight()}},methods:{checkHeight:function(){this.$refs.textarea&&this.useTextArea&&(""!==this.value?this.$refs.textarea.style.height=this.$refs.textarea.scrollHeight+"px":this.$refs.textarea.style.height="90px")}},mounted:function(){var t=this;this.$nextTick(function(){t.checkHeight()})}},lt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w3-row"},[a("div",{staticClass:"box-container"},[t.showAsInput?a("div",{staticClass:"box-content dark-2"},[t.restorable?a("div",{staticClass:"custom-value-back app-color-white-1 cursor-pointer",on:{click:function(e){t.$emit("custom-value-back")}}},[a("i",{staticClass:"fa fa-undo",attrs:{"aria-hidden":"true"}})]):t._e(),t._v(" "),t.useTextArea?a("textarea",{ref:"textarea",staticClass:"w3-input w3-round",attrs:{placeholder:t.placeholder},domProps:{value:t.value},on:{input:function(e){t.$emit("input",e.target.value)}}}):a("input",{staticClass:"w3-input w3-round",attrs:{placeholder:t.placeholder,type:"text",name:""},domProps:{value:t.value},on:{input:function(e){t.$emit("input",e.target.value)}}})]):a("div",{staticClass:"box-content dark-1"},[a("div",{staticClass:"value-content"},[a("div",{staticClass:"w3-left cursor-pointer app-color-white-1",on:{click:function(e){t.$emit("set-custom-value")}}},[t.restorable?a("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"}}):t._e()]),t._v(" "),a("div",{staticClass:"w3-left w3-margin-left"},[a("span",[t._v(t._s(t.value))])])])])])])},staticRenderFns:[]};var ct=a("VU/8")(rt,lt,!1,function(t){a("QNDw")},"data-v-5380dcbe",null).exports,ut={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"btns-container app-color-2-co"},[a("div",{staticClass:"w3-left cursor-pointer",on:{click:function(e){t.$emit("move-up")}}},[a("i",{staticClass:"fa fa-caret-up",attrs:{"aria-hidden":"true"}})]),t._v(" "),a("div",{staticClass:"w3-left cursor-pointer",on:{click:function(e){t.$emit("remove")}}},[a("i",{staticClass:"fa fa-times-circle",attrs:{"aria-hidden":"true"}})]),t._v(" "),a("div",{staticClass:"w3-left cursor-pointer",on:{click:function(e){t.$emit("move-down")}}},[a("i",{staticClass:"fa fa-caret-down",attrs:{"aria-hidden":"true"}})])])},staticRenderFns:[]};var pt=a("VU/8")({},ut,!1,function(t){a("kMiT")},"data-v-01572baa",null).exports,dt={components:{"app-poll-text-input":ct,"app-move-btns":pt},props:{value:{type:Object},restorable:{type:Boolean,default:!1},showMoveBtns:{type:Boolean,default:!1}},computed:{question:function(){return this.value}},methods:{questionTypeNice:function(t){switch(t){case"RATE_1_5":return"rate";case"TEXT":return"open text"}}}},ht={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.question?a("div",{},[a("div",{staticClass:"w3-row"},[t.restorable?a("div",{staticClass:"app-color-white-1 cursor-pointer restore-btn"},[t.question.custom?a("i",{staticClass:"fa fa-undo",attrs:{"aria-hidden":"true"},on:{click:function(e){t.$emit("custom-question-back")}}}):a("i",{staticClass:"fa fa-pencil",attrs:{"aria-hidden":"true"},on:{click:function(e){t.$emit("set-custom-question")}}})]):t._e(),t._v(" "),a("app-move-btns",{on:{"move-up":function(e){t.$emit("move-up")},"move-down":function(e){t.$emit("move-down")},remove:function(e){t.$emit("remove")}}})],1),t._v(" "),t.restorable&&!t.question.custom?a("div",{staticClass:"w3-row"},[a("div",{staticClass:"w3-col m9"},[a("div",{staticClass:"rounded-input app-color-2-br"},[t._v("\n        "+t._s(t.question.text)+"\n      ")])]),t._v(" "),a("div",{staticClass:"w3-col m3 select-col"},[a("div",{staticClass:"rounded-input app-color-2-br w3-margin-bottom"},[t._v("\n        "+t._s(t.questionTypeNice(t.question.type))+"\n      ")]),t._v(" "),"RATE_1_5"===t.question.type?a("div",{staticClass:"rounded-input app-color-2-br"},[t._v("\n        "+t._s(t.question.weight)+" %\n      ")]):t._e()])]):a("div",{},[a("div",{staticClass:"w3-col m9 w3-margin-bottom"},[a("app-poll-text-input",{attrs:{placeholder:"Question",restorable:!1,useTextArea:!0},model:{value:t.question.text,callback:function(e){t.$set(t.question,"text",e)},expression:"question.text"}})],1),t._v(" "),a("div",{staticClass:"w3-col m3 select-col"},[a("div",{staticClass:"w3-row w3-margin-bottom"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.question.type,expression:"question.type"}],staticClass:"app-select-input app-color-2-br dark-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.question,"type",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"RATE_1_5"}},[t._v("Rate")]),t._v(" "),a("option",{attrs:{value:"TEXT"}},[t._v("Open text")])])]),t._v(" "),a("div",{staticClass:"w3-row"},["RATE_1_5"===t.question.type?a("div",{staticClass:"w3-display-container"},[a("input",{directives:[{name:"model",rawName:"v-model.number",value:t.question.weight,expression:"question.weight",modifiers:{number:!0}}],staticClass:"rounded-input dark-3 app-color-2-br",attrs:{type:"number",step:"10",name:"",value:""},domProps:{value:t.question.weight},on:{input:function(e){e.target.composing||t.$set(t.question,"weight",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),a("span",{staticClass:"percentage w3-display-left app-color-2-co"},[t._v("%")])]):t._e()])])])]):t._e()},staticRenderFns:[]};var mt=function(t,e){for(var a=0;a<e.length;a++)if(e[a].id===t)return a;return-1},vt={components:{"app-poll-text-input":ct,"app-poll-question-input":a("VU/8")(dt,ht,!1,function(t){a("2Y2G")},"data-v-44c13162",null).exports,"app-move-btns":pt},computed:{orgId:function(){return this.$route.params.orgId},fromTemplate:function(){return this.$store.state.newpoll.fromTemplate},pollG:function(){return this.$store.state.newpoll.poll}},data:function(){return{poll:null,customTitle:!1,customDescription:!1,showErrors:!1}},methods:{setCustomTitle:function(){this.customTitle=!0,this.poll.custom=!1},setCustomDescription:function(){this.customDescription=!0,this.poll.custom=!1},customTitleBack:function(){this.poll.title=this.pollG.title,this.customTitle=!1,this.poll.custom=this.customDescription},customDescriptionBack:function(){this.poll.description=this.pollG.description,this.customDescription=!1,this.poll.custom=this.customTitle},customAxis:function(t){var e=mt(t,this.poll.axes);-1!==e&&(this.poll.axes[e].custom=!0)},customAxisBack:function(t){var e=mt(t,this.poll.axes),a=mt(t,this.pollG.axes);-1!==e&&-1!==a&&(this.poll.axes.splice(e,1,JSON.parse(ot()(this.pollG.axes[a]))),this.poll.axes[e].custom=!1)},customQuestion:function(t,e){var a=mt(t,this.poll.axes);if(-1!==a){var s=mt(e,this.poll.axes[a].questions);-1!==s&&(this.poll.axes[a].questions[s].custom=!0)}},customQuestionBack:function(t,e){var a=mt(t,this.poll.axes),s=mt(t,this.pollG.axes);if(-1!==a&&-1!==s){var n=mt(e,this.poll.axes[a].questions),i=mt(e,this.pollG.axes[a].questions);-1===n&&-1===i||(this.poll.axes[a].questions.splice(n,1,JSON.parse(ot()(this.pollG.axes[s].questions[i]))),this.poll.axes[a].questions[n].custom=!1)}},newAxis:function(){this.poll.axes.push(K())},axisWeightsOk:function(t){var e=mt(t,this.poll.axes);if(-1!==e){var a=this.poll.axes[e],s=0,n=!1;for(var i in a.questions){var o=a.questions[i];"RATE_1_5"===o.type&&(n=!0,s+=o.weight)}return!n||Math.abs(s-100)<.001}},axisHasARate:function(t){var e=mt(t,this.poll.axes);if(-1!==e){var a=this.poll.axes[e];for(var s in a.questions){if("RATE_1_5"===a.questions[s].type)return!0}return!1}},moveUpAxis:function(t){var e=mt(t.id,this.poll.axes);if(-1!==e&&-1!==e&&e>0){var a=this.poll.axes[e-1];this.poll.axes.splice(e-1,1,this.poll.axes[e]),this.poll.axes.splice(e,1,a)}},moveDownAxis:function(t){var e=mt(t.id,this.poll.axes);if(-1!==e&&-1!==e&&e<this.poll.axes.length-1){var a=this.poll.axes[e+1];this.poll.axes.splice(e+1,1,this.poll.axes[e]),this.poll.axes.splice(e,1,a)}},removeAxis:function(t){var e=mt(t.id,this.poll.axes);-1!==e&&this.poll.axes.splice(e,1)},newQuestion:function(t){var e=mt(t.id,this.poll.axes);-1!==e&&(this.poll.axes[e].custom=!0,this.poll.axes[e].questions.push(j()))},removeQuestion:function(t,e){var a=mt(t.id,this.poll.axes);if(-1!==a){var s=mt(e.id,this.poll.axes[a].questions);this.poll.axes[a].questions.length>1&&-1!==s&&this.poll.axes[a].questions.splice(s,1)}},moveUpQuestion:function(t,e){var a=mt(t.id,this.poll.axes);if(-1!==a){var s=mt(e.id,this.poll.axes[a].questions);if(-1!==s&&s>0){var n=t.questions[s-1];t.questions.splice(s-1,1,t.questions[s]),t.questions.splice(s,1,n)}}},moveDownQuestion:function(t,e){var a=mt(t.id,this.poll.axes);if(-1!==a){var s=mt(e.id,this.poll.axes[a].questions);if(-1!==s&&s<t.questions.length-1){var n=this.poll.axes[a].questions[s+1];t.questions.splice(s+1,1,t.questions[s]),t.questions.splice(s,1,n)}}},next:function(){var t=!0;for(var e in""===this.poll.title&&(t=!1),this.poll.axes){var a=this.poll.axes[e];for(var s in""===a.title&&(t=!1),a.title.length>25&&(t=!1),a.questions){""===a.questions[s].text&&(t=!1)}}t?(this.$store.commit("setNewPoll",this.poll),this.$store.commit("setEditingNewPoll",!0),this.$router.push({name:"NewPollConfiguration"})):this.showErrors=!0}},created:function(){this.poll=JSON.parse(ot()(this.$store.state.newpoll.poll))}},ft={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w3-container content-container this-container"},[a("router-link",{staticClass:"w3-row disp-block w3-margin-bottom w3-hide-large",attrs:{to:{name:t.fromTemplate?"NewPollTemplate":"OrganizationPolls"}}},[a("app-back-button",{})],1),t._v(" "),a("div",{staticClass:"central-column-container dark-1"},[a("router-link",{staticClass:"w3-hide-medium w3-hide-small back-button-in-column",attrs:{to:{name:t.fromTemplate?"NewPollTemplate":"OrganizationPolls"}}},[a("app-back-button",{})],1),t._v(" "),a("div",{staticClass:"w3-row"},[a("app-column-header",[t._v("\n        New Poll - "),a("i",[t._v("Customization")])])],1),t._v(" "),a("div",{staticClass:"w3-row w3-margin-top"},[a("app-poll-text-input",{attrs:{placeholder:"Poll Title",restorable:t.fromTemplate,showAsInput:t.customTitle||!t.fromTemplate},on:{"set-custom-value":function(e){t.setCustomTitle()},"custom-value-back":function(e){t.customTitleBack()}},model:{value:t.poll.title,callback:function(e){t.$set(t.poll,"title",e)},expression:"poll.title"}}),t._v(" "),a("app-error-panel",{attrs:{show:t.showErrors&&""===t.poll.title,message:"poll title cannot be empty"}})],1),t._v(" "),a("div",{staticClass:"w3-row w3-margin-top"},[a("app-poll-text-input",{attrs:{placeholder:"Poll Description",restorable:t.fromTemplate,useTextArea:!0,showAsInput:t.customDescription||!t.fromTemplate},on:{"set-custom-value":function(e){t.setCustomDescription()},"custom-value-back":function(e){t.customDescriptionBack()}},model:{value:t.poll.description,callback:function(e){t.$set(t.poll,"description",e)},expression:"poll.description"}})],1),t._v(" "),a("div",{staticClass:"axes-container"},[t._l(t.poll.axes,function(e,s){return a("div",{key:e.id,staticClass:"axis-container w3-margin-top"},[t.poll.axes.length>1?a("div",{staticClass:"w3-row"},[a("app-move-btns",{on:{"move-up":function(a){t.moveUpAxis(e)},remove:function(a){t.removeAxis(e)},"move-down":function(a){t.moveDownAxis(e)}}})],1):t._e(),t._v(" "),a("div",{staticClass:"w3-row"},[a("div",{staticClass:"w3-col l2 s12 axis-number-col w3-center w3-margin-bottom"},[a("h4",[t._v("Axis "+t._s(s+1))])]),t._v(" "),a("div",{staticClass:"w3-col l10 s12"},[a("div",{staticClass:"w3-row w3-margin-bottom"},[a("app-poll-text-input",{attrs:{placeholder:"Axis title",restorable:t.fromTemplate,showAsInput:e.custom||!t.fromTemplate},on:{"set-custom-value":function(a){t.customAxis(e.id)},"custom-value-back":function(a){t.customAxisBack(e.id)}},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"axis.title"}}),t._v(" "),a("app-error-panel",{attrs:{show:t.showErrors&&""===e.title,message:"axis title cannot be empty"}}),t._v(" "),a("app-error-panel",{attrs:{show:e.title.length>25,message:"axis title should be shorter"}})],1),t._v(" "),t._l(e.questions,function(s,n){return a("div",{key:s.id,staticClass:"question-container"},[a("app-poll-question-input",{attrs:{showMoveBtns:e.questions.length>1,restorable:t.fromTemplate},on:{"move-up":function(a){t.moveUpQuestion(e,s)},"move-down":function(a){t.moveDownQuestion(e,s)},remove:function(a){t.removeQuestion(e,s)},"set-custom-question":function(a){t.customQuestion(e.id,s.id)},"custom-question-back":function(a){t.customQuestionBack(e.id,s.id)}},model:{value:e.questions[n],callback:function(a){t.$set(e.questions,n,a)},expression:"axis.questions[ixq]"}}),t._v(" "),a("app-error-panel",{attrs:{show:t.showErrors&&""===s.text,message:"question text cannot be empty"}})],1)}),t._v(" "),e.custom?a("div",{staticClass:"w3-row add-question-row"},[a("app-plus-button",{staticClass:"w3-right",on:{click:function(a){t.newQuestion(e)}}}),t._v(" "),a("span",{staticClass:"w3-right"},[t._v("Add Question")])],1):t._e(),t._v(" "),a("app-error-panel",{attrs:{show:!t.axisWeightsOk(e.id),message:"weights of rate questions must sum 100%"}}),t._v(" "),a("app-error-panel",{attrs:{show:!t.axisHasARate(e.id),message:"at least one question must be rated"}})],2)])])}),t._v(" "),a("div",{staticClass:"w3-row w3-margin-top new-axis-row"},[a("span",{staticClass:"w3-left"},[t._v("Add Axis")]),t._v(" "),a("app-plus-button",{staticClass:"w3-left",on:{click:function(e){t.newAxis()}}})],1)],2),t._v(" "),a("div",{staticClass:"w3-row"},[a("app-button",{staticClass:"w3-right",on:{click:function(e){t.next()}}},[t._v("Next")])],1)],1)],1)},staticRenderFns:[]};var wt=a("VU/8")(vt,ft,!1,function(t){a("afky")},"data-v-2286c891",null).exports,gt={props:{value:{type:String},elements:{type:Array}}},_t={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w3-row"},[a("div",{staticClass:"box-container"},[a("div",{staticClass:"box-content"},[a("select",{staticClass:"w3-input",domProps:{value:t.value},on:{input:function(e){t.$emit("input",e.target.value)}}},t._l(t.elements,function(e){return a("option",{key:e.value,domProps:{value:e.value}},[t._v(t._s(e.text))])}))])])])},staticRenderFns:[]};var xt={components:{"app-config-select":a("VU/8")(gt,_t,!1,function(t){a("gl4z")},"data-v-326c7035",null).exports},data:function(){return{poll:null,config:null,errorCreatingPoll:!1,errorCreatingPollMsg:""}},computed:{orgId:function(){return this.$route.params.orgId}},methods:{create:function(){var t=this;""===this.config.audience&&(this.showErrors=!0),this.poll.config=this.config,this.$store.commit("setNewPoll",this.poll),this.axios.post("/1/organization/"+this.orgId+"/poll",this.poll).then(function(e){"success"===e.data.result?t.$router.push({name:"OrganizationPolls"}):(t.errorCreatingPoll=!0,t.errorCreatingPollMsg=e.data.result)}).catch(function(e){t.errorCreatingPoll=!0,t.errorCreatingPollMsg=e.message})}},created:function(){this.poll=JSON.parse(ot()(this.$store.state.newpoll.poll)),this.config={audience:"ANYONE_WITH_LINK"}}},Ct={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w3-container content-container this-container"},[a("div",{staticClass:"column-container"},[a("router-link",{staticClass:"w3-row disp-block w3-margin-bottom w3-hide-large",attrs:{to:{name:"NewPollQuestions"}}},[a("app-back-button",{})],1),t._v(" "),a("div",{staticClass:"central-column-container dark-1"},[a("router-link",{staticClass:"w3-hide-medium w3-hide-small back-button-in-column",attrs:{to:{name:"NewPollQuestions"}}},[a("app-back-button",{})],1),t._v(" "),a("div",{staticClass:"w3-row"},[a("app-column-header",[t._v("\n          New Poll - "),a("i",[t._v("Configuration")])])],1),t._v(" "),a("div",{staticClass:"w3-row w3-margin-top"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.config.audience,expression:"config.audience"}],staticClass:"app-select-input app-color-2-br dark-3",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.config,"audience",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"ANYONE_WITH_LINK"}},[t._v("Anyone with the link")])])]),t._v(" "),a("div",{staticClass:"w3-row w3-center create-row"},[a("app-button",{staticClass:"w3-right",on:{click:function(e){t.create()}}},[t._v("create!")])],1),t._v(" "),a("app-error-panel",{attrs:{show:t.errorCreatingPoll,message:t.errorCreatingPollMsg}})],1)],1)])},staticRenderFns:[]};var bt=a("VU/8")(xt,Ct,!1,function(t){a("2Vc4")},"data-v-ca2a5042",null).exports,kt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"rating-container"},t._l([1,2,3,4,5],function(e){return a("div",{key:e,staticClass:"rating-space",class:{"rating-space-hover":t.hoveringOver>=e,"rating-space-selected":t.selected>=e&&0===t.hoveringOver},on:{click:function(a){t.clicked(e)},mouseenter:function(a){t.hoverEnter(e)},mouseleave:function(a){t.hoverLeave(e)}}},[a("i",{staticClass:"fa fa-circle rating-dot",attrs:{"aria-hidden":"true"}})])}))},staticRenderFns:[]};var yt={components:{"app-rating-selector":a("VU/8")({data:function(){return{hoveringOver:0,selected:0}},methods:{clicked:function(t){this.selected=t,this.$emit("input",t)},hoverEnter:function(t){this.hoveringOver=t},hoverLeave:function(t){this.hoveringOver=0}}},kt,!1,function(t){a("QFFE")},"data-v-16571c1e",null).exports},props:{question:{type:Object}},methods:{questionAnswered:function(t){this.$store.commit("addAnswer",{questionId:this.question.id,rate:t})},questionTextAnswered:function(t){this.checkHeight(t),this.$store.commit("addAnswer",{questionId:this.question.id,text:t.target.value})},checkHeight:function(t){this.$refs.textarea&&(""!==t.target.value?this.$refs.textarea.scrollHeight>90&&(this.$refs.textarea.style.height=this.$refs.textarea.scrollHeight+"px"):this.$refs.textarea.style.height="90px")}}},Tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"question-text w3-col m8 s12"},[t._v("\n    "+t._s(t.question.text)+"\n  ")]),t._v(" "),"RATE_1_5"===t.question.type?a("div",{staticClass:"w3-col m4 s12"},[a("app-rating-selector",{staticClass:"margin-0-auto",on:{input:function(e){t.questionAnswered(e)}}})],1):t._e(),t._v(" "),"TEXT"===t.question.type?a("div",{staticClass:"w3-col m12 s12"},[a("textarea",{ref:"textarea",staticClass:"w3-margin-top rounded-input dark-2 app-color-2-br",attrs:{name:"name",rows:"3"},on:{input:function(e){t.questionTextAnswered(e)}}})]):t._e()])},staticRenderFns:[]};var $t={components:{"app-answer-question":a("VU/8")(yt,Tt,!1,function(t){a("ML8f")},"data-v-50bbb982",null).exports},props:{axis:{type:Object}}},qt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{},[a("div",{staticClass:"w3-row rounded-input app-color-1-br w3-margin-top"},[a("h3",[t._v(t._s(t.axis.title))])]),t._v(" "),a("div",{staticClass:"w3-row questions-row"},t._l(t.axis.questions,function(e,s){return a("div",{key:e.id,staticClass:"w3-row question-container app-color-2-br"},[a("div",{staticClass:"w3-row"},[a("b",[t._v(t._s(s+1)+".")])]),t._v(" "),a("app-answer-question",{attrs:{question:e}})],1)}))])},staticRenderFns:[]};var It={components:{"app-answer-axis":a("VU/8")($t,qt,!1,function(t){a("zxPF")},"data-v-a16846b0",null).exports},props:{poll:{type:Object}},data:function(){return{alreadyFilled:!1,axisIx:-1,answerSucessful:!1,answerError:!1,answerErrorMsg:""}},computed:{filledCookieId:function(){return"POLL-"+this.poll.id},filledValue:function(){return"FILLED"},isLast:function(){return this.axisIx===this.poll.axes.length-1}},methods:{next:function(){this.axisIx<this.poll.axes.length-1&&(this.axisIx+=1)},back:function(){this.axisIx-=1},send:function(){var t=this;this.axios.post("/1/poll/"+this.poll.id+"/answer",this.$store.state.answerpoll.answers).then(function(e){"success"===e.data.result?(t.answerSucessful=!0,t.$cookie.set(t.filledCookieId,t.filledValue,365)):(t.answerError=!0,t.answerErrorMsg=e.data.message)}).catch(function(e){t.answerError=!0,t.answerErrorMsg=e.message})}},created:function(){this.$cookie.get(this.filledCookieId)===this.filledValue&&(this.alreadyFilled=!0)}},Pt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"poll-fill-container"},[-1==t.axisIx||t.alreadyFilled||t.answerSucessful?a("div",{staticClass:"w3-center title-page"},[t._m(0),t._v(" "),a("div",{staticClass:"w3-row dark-1 title-container"},[a("h1",[a("b",[t._v(t._s(t.poll.title))])]),t._v(" "),a("p",[t._v(t._s(t.poll.description))]),t._v(" "),t.alreadyFilled||t.answerSucessful?a("div",{staticClass:"w3-row rounded-input app-color-1-br w3-margin-top anouncement"},[t._v("\n        "+t._s(t.answerSucessful?"Your answer has been succesfully recored, thanks!":"Thanks for having filled the poll!")+"\n      ")]):a("div",{},[a("app-button",{staticClass:"margin-0-auto",on:{click:function(e){t.axisIx=0}}},[t._v("Start")])],1)])]):a("div",{},[a("div",{staticClass:"w3-row"},[a("app-back-button",{staticClass:"w3-hide-large",on:{click:function(e){t.back()}}})],1),t._v(" "),a("div",{staticClass:"central-column-container dark-1"},[a("div",{staticClass:"w3-row"},[a("app-back-button",{staticClass:"w3-hide-medium w3-hide-small back-button-in-column",on:{click:function(e){t.back()}}})],1),t._v(" "),a("app-answer-axis",{key:t.poll.axes[t.axisIx].id,attrs:{axis:t.poll.axes[t.axisIx]}}),t._v(" "),a("div",{staticClass:"w3-row next-btn-row"},[t.isLast?a("app-button",{staticClass:"margin-0-auto",on:{click:function(e){t.send()}}},[t._v("Send!")]):a("app-button",{staticClass:"margin-0-auto",on:{click:function(e){t.next()}}},[t._v("Next")])],1)],1)]),t._v(" "),t.alreadyFilled&&!t.answerSucessful?a("div",{}):t._e(),t._v(" "),t.answerSucessful?a("div",{}):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"w3-row"},[e("img",{staticClass:"logo",attrs:{src:a("wYO/"),alt:""}})])}]};var At={components:{"app-answer-poll":a("VU/8")(It,Pt,!1,function(t){a("AXse")},"data-v-8674e542",null).exports},data:function(){return{poll:null}},computed:{pollId:function(){return this.$route.params.pollId}},methods:{getPoll:function(){var t=this;this.axios.get("/1/poll/"+this.pollId).then(function(e){"success"===e.data.result&&(t.poll=e.data.data)})}},created:function(){this.getPoll()}},Et={render:function(){var t=this.$createElement,e=this._self._c||t;return this.poll?e("div",{staticClass:"content-container this-container"},[e("app-answer-poll",{attrs:{poll:this.poll}})],1):this._e()},staticRenderFns:[]};var Rt=a("VU/8")(At,Et,!1,function(t){a("Rqbb")},"data-v-c7572cda",null).exports;i.a.use(p.a);var zt=new p.a({mode:"hash",routes:[{path:"/",name:"RootView",component:v},{path:"/loginCallback",name:"LoginCallback",component:w},{path:"/landing",name:"LandingPage",component:x},{path:"/app",component:b,children:[{path:"/",name:"AppView",redirect:"dashboard"},{path:"dashboard",component:q,children:[{path:"/",name:"Dashboard",redirect:"orgs"},{path:"orgs",name:"Organizations",component:R},{path:"org/:orgId",component:F,children:[{path:"/",name:"OrganizationContent",redirect:"polls"},{path:"polls",name:"OrganizationPolls",component:U},{path:"poll/:pollId",name:"OrganizationPoll",component:G},{path:"newpoll",name:"NewPoll",component:et,children:[{path:"template",name:"NewPollTemplate",component:nt},{path:"questions",name:"NewPollQuestions",component:wt},{path:"config",name:"NewPollConfiguration",component:bt}]}]}]},{path:"answer/:pollId",name:"AnswerPoll",component:Rt}]}]}),Ft=a("NYxO"),Ot={state:{lock:null,authenticated:!1,profile:null},getters:{isAuthenticated:function(t){return t.authenticated},organizations:function(t){return null!==t.profile?t.profile.organizations:[]}},mutations:{setAuthenticated:function(t,e){t.authenticated=e},setProfile:function(t,e){t.profile=e},setLock:function(t,e){t.lock=e}},actions:{handleAuthentication:function(t){t.state.auth.handleAuthentication(t)},updateProfile:function(t){t.state.authenticated&&(console.log("updating profile"),i.a.axios.get("/1/user/myProfile").then(function(e){"success"===e.data.result?t.commit("setProfile",e.data.data):"anonymous user"===e.data.message&&(zt.push({name:"LandingPage"}),t.commit("setAuthenticated",!1))}).catch(function(e){console.log(e),t.dispatch("logout"),zt.push({name:"LandingPage"})}))},logoutUser:function(t){localStorage.removeItem("access_token"),localStorage.removeItem("id_token"),t.commit("setAuthenticated",!1),t.commit("setProfile",null),zt.push({name:"LandingPage"})}}},Mt={state:{organization:null},getters:{organizationName:function(t){if(null!==t.organization)return t.organization.name}},mutations:{setOrganization:function(t,e){t.organization=e}},actions:{refreshOrganization:function(t){null!==t.state.organization&&t.dispatch("updateOrganization",t.state.organization.id)},updateOrganization:function(t,e){console.log("updating organization"),i.a.axios.get("/1/organization/"+e).then(function(e){"success"===e.data.result?t.commit("setOrganization",e.data.data):console.log(e.data.message)}).catch(function(t){console.log(t)})}}},St={state:{poll:null,editing:!1,fromTemplate:!1},getters:{},mutations:{setNewPoll:function(t,e){t.poll=e},setEditingNewPoll:function(t,e){t.editing=e},setFromTemplate:function(t,e){t.fromTemplate=e}},actions:{}},Nt={state:{answers:[]},getters:{},mutations:{addAnswer:function(t,e){var a=function(t,e){for(var a in e)if(e[a].questionId===t)return a;return-1}(e.questionId,t.answers);-1===a?t.answers.push(e):t.answers[a]=e}},actions:{}};i.a.use(Ft.a);var Ut=new Ft.a.Store({state:{},modules:{user:Ot,organization:Mt,newpoll:St,answerpoll:Nt}}),Vt=a("mtWM"),Dt=a.n(Vt),Qt=a("Rf8U"),Lt=a.n(Qt),Wt=a("K/Lq"),Bt=a.n(Wt),Xt=a("TXmL"),Ht=a("XILU"),Yt=a.n(Ht),Gt={props:{show:Boolean,message:String,panelType:{type:String,default:"error"}},computed:{isError:function(){return"error"===this.panelType},isSuccess:function(){return"success"===this.panelType}}},jt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"slider-container "},[e("transition",{attrs:{name:"slideDownUp"}},[this.show?e("div",{staticClass:"w3-row w3-tag panel-container",class:{"error-panel":this.isError,"success-panel":this.isSuccess}},[this._v("\n      "+this._s(this.message)+"\n    ")]):this._e()])],1)},staticRenderFns:[]};var Kt=a("VU/8")(Gt,jt,!1,function(t){a("gwO1")},"data-v-5954de67",null).exports,Jt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"box-container"},[e("div",{staticClass:"box-content"},[this._t("default")],2)])},staticRenderFns:[]};var Zt=a("VU/8")({},Jt,!1,function(t){a("8U3U")},"data-v-a0eb7336",null).exports,te={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"back-button-container cursor-pointer",on:{click:function(e){t.$emit("click",e)}}},[t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"back-button-content"},[e("i",{staticClass:"fa fa-chevron-left",attrs:{"aria-hidden":"true"}})])}]};var ee=a("VU/8")({},te,!1,function(t){a("3hTW")},"data-v-bde02c8e",null).exports,ae={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"this-button-container cursor-pointer",on:{click:function(e){t.$emit("click",e)}}},[t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"this-button-content"},[e("i",{staticClass:"fa fa-plus",attrs:{"aria-hidden":"true"}})])}]};var se=a("VU/8")({},ae,!1,function(t){a("Kabd")},"data-v-5afa41b9",null).exports,ne={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"this-button-container cursor-pointer w3-center noselect",on:{click:function(e){t.$emit("click",e)}}},[a("div",{staticClass:"this-button-content"},[t._t("default")],2)])},staticRenderFns:[]};var ie=a("VU/8")({},ne,!1,function(t){a("OqSr")},"data-v-0fc83d07",null).exports;a.d(e,"i18n",function(){return oe}),i.a.config.productionTip=!1,i.a.use(Lt.a,Dt.a),i.a.component("app-column-header",Zt),i.a.component("app-back-button",ee),i.a.component("app-plus-button",se),i.a.component("app-button",ie),Dt.a.interceptors.request.use(function(t){return t.headers.common.Authorization="Bearer "+localStorage.getItem("id_token"),t},function(t){return n.a.reject(t)}),i.a.use(Xt.a);var oe=new Xt.a({locale:"en",fallbackLocale:"en",messages:{en:{organizationCreationErrorMessage:"Unexpected error while creating the organization. Please get in contact with us at:"},de:{organizationCreationErrorMessage:"Unerwarteter Fehler beim Erstellen der Organisation. Bitte nehmen Sie Kontakt mit uns auf:"}}});i.a.use(Bt.a),i.a.component("app-error-panel",Kt),i.a.component("datepicker",Yt.a),new i.a({el:"#app",router:zt,store:Ut,i18n:oe,components:{App:u},template:"<App/>"})},OqSr:function(t,e){},PtrG:function(t,e){},QFFE:function(t,e){},QNDw:function(t,e){},Rqbb:function(t,e){},Xz9D:function(t,e){},"YlO/":function(t,e){},afky:function(t,e){},"bS/7":function(t,e){},gUlX:function(t,e){},gl4z:function(t,e){},gwO1:function(t,e){},ix7x:function(t,e){},kMiT:function(t,e){},"lZ/a":function(t,e){},ohxK:function(t,e){},sRtR:function(t,e){},vo56:function(t,e){},"wYO/":function(t,e,a){t.exports=a.p+"static/img/logo-white.d612e7b.png"},yKvA:function(t,e){},zxPF:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.7522860ef1d7d5bee696.js.map